"use client";

import { useEffect, useMemo, useRef, useState } from "react";
import Image from "next/image";
import { motion, useReducedMotion, useScroll, useTransform } from "framer-motion";
import Lenis from "@studio-freight/lenis";
import { gsap } from "gsap";

type Project = {
  title: string;
  caption: string;
  description: string;
  image: string;
  tags: string[];
};

type ProcessStep = {
  title: string;
  description: string;
};

type Skill = {
  title: string;
  description: string;
  badge?: string;
};

type TimelineMoment = {
  id: string;
  badge: string;
  year: string;
  title: string;
  description: string;
  image: string;
  accent: string;
};

const sectionOrder = ["home", "projects", "process", "timeline", "about", "skills", "contact"] as const;

const projects: Project[] = [
  {
    title: "FinanceFlow",
    caption: "App mobile / 2024",
    description:
      "Onboarding guiado, alertas de valor e experimentos semanais para +22% MAU em 90 dias e melhor visibilidade de gastos.",
    image:
      "https://hoirqrkdgbmvpwutwuwj-all.supabase.co/storage/v1/object/public/assets/assets/ec0c68fa-cafb-4fe2-894e-0d9f5bbd7e29_1600w.jpg",
    tags: ["Go-to-market", "Onboarding", "Experimentação"],
  },
  {
    title: "HealthConnect",
    caption: "Plataforma web / 2023",
    description:
      "Fluxo de remarcação, lembretes proativos e microcopys de confiança reduziram churn de consultas em 18%.",
    image:
      "https://hoirqrkdgbmvpwutwuwj-all.supabase.co/storage/v1/object/public/assets/assets/9cd1d4fc-703c-4e4d-a54e-9c08b0644568_1600w.jpg",
    tags: ["Retenção", "UX Research", "Design System"],
  },
  {
    title: "EduPath",
    caption: "Web / 2023",
    description:
      "Paywall contextual + provas sociais elevaram conversão trial -> plano em 31%. Sequência de emails reativou 12% inativos.",
    image:
      "https://hoirqrkdgbmvpwutwuwj-all.supabase.co/storage/v1/object/public/assets/assets/507d47d1-d71f-465b-b833-073b5ed3cdfa_1600w.jpg",
    tags: ["Pricing", "CRO", "Conteúdo"],
  },
  {
    title: "TaskPilot",
    caption: "SaaS / 2022",
    description:
      "Checklist interativo + nudges comportamentais aumentaram ativação D1 em 27% e criaram ciclo de valor recorrente.",
    image:
      "https://hoirqrkdgbmvpwutwuwj-all.supabase.co/storage/v1/object/public/assets/assets/89ab01cb-777c-4f38-8abb-6f3c2a7430c0_1600w.jpg",
    tags: ["Growth Loops", "Product Marketing", "Analytics"],
  },
];

const processSteps: ProcessStep[] = [
  {
    title: "Pesquisa & Contexto",
    description: "Entrevistas, leitura de funil, jobs-to-be-done e mapeamento de barreiras.",
  },
  {
    title: "Estratégia de Canal & Mensagem",
    description: "Proposta de valor por segmento, landing/ads/email alinhados à jornada.",
  },
  {
    title: "Experimentação Rápida",
    description: "Hipóteses ICE/PIE, A/B e smoke tests para aprender rápido sem travar time.",
  },
  {
    title: "Medição & Narrativa",
    description: "Dashboards acionáveis e histórias que alinham produto, marketing e sales.",
  },
  {
    title: "Escala & Sistemas",
    description: "Playbooks repetíveis, design system e kits de mensagem para acelerar lançamentos.",
  },
];

const skills: Skill[] = [
  {
    title: "Product Marketing",
    description: "Posicionamento, mensagens por segmento, narrativas que convertem em todas as telas.",
  },
  {
    title: "Growth Experiments",
    description: "Estratégia de hipóteses, A/B, smoke tests e ramp-up seguro para ganhos compostos.",
  },
  {
    title: "Data & Analytics",
    description: "Instrumentação, eventos, coortes e leitura de comportamento para priorizar roadmap.",
    badge: "Core",
  },
  {
    title: "Design Systems & Enablement",
    description: "Kits de landing e componentes para replicar mensagens e experiências com consistência.",
  },
];

const timelineMoments: TimelineMoment[] = [
  {
    id: "foundation",
    badge: "Momento 01 - Base estrategica",
    year: "2021",
    title: "Fundamentos na ESPM",
    description:
      "O inicio da jornada. Na ESPM desenvolvi a base do meu pensamento estrategico em comunicacao e marketing com projetos para Globoplay, Havaianas e P&G.",
    image: "/media/timeline.jpg",
    accent: "#fcd34d",
  },
  {
    id: "tech",
    badge: "Momento 02 - Despertar tech",
    year: "2022",
    title: "Entrada no mundo tech",
    description:
      "Na Zippi mergulhei no ecossistema de startups. Transformei curiosidade por tecnologia em acao aplicando marketing, performance e SEO para uma fintech.",
    image: "/media/timeline.jpg",
    accent: "#f472b6",
  },
  {
    id: "retail",
    badge: "Momento 03 - Experiencia no varejo",
    year: "2024",
    title: "Entendendo o cliente no mundo real",
    description:
      "Na Track&Field convivi com franquias e ponto de venda. Enxerguei a jornada 360 integrando o online com a experiencia fisica e seus indicadores.",
    image: "/media/timeline.jpg",
    accent: "#60a5fa",
  },
  {
    id: "trendly",
    badge: "Momento 04 - Salto empreendedor",
    year: "2025",
    title: "Fundacao da Trendly",
    description:
      "Co-fundei a Trendly para resolver um problema real com tecnologia. Foi minha imersao profunda em IA, automacao e desenvolvimento de produto.",
    image: "/media/timeline.jpg",
    accent: "#34d399",
  },
  {
    id: "today",
    badge: "Momento 05 - Construtor de solucoes",
    year: "Hoje",
    title: "Criando com as proprias maos",
    description:
      "Chatbots inteligentes, plataformas web e produtos autorais. Hoje transformo ideias em solucoes funcionais e mensuraveis.",
    image: "/media/timeline.jpg",
    accent: "#c084fc",
  },
];

const socialLinks = [
  { label: "LinkedIn", href: "#" },
  { label: "Instagram", href: "#" },
  { label: "Dribbble", href: "#" },
];

const heroBackground = "/media/timeline.jpg";

// Glow colors for background effect
const glowColors = {
  primary: "rgba(251,146,60,0.55)", // orange
  secondary: "rgba(236,72,153,0.45)", // pink
};

const mockupPlaceholder = heroBackground;

const fadeUp = {
  hidden: { opacity: 0, y: 32 },
  visible: {
    opacity: 1,
    y: 0,
    transition: { duration: 0.8, ease: [0.22, 1, 0.36, 1] as const },
  },
};

const stagger = {
  hidden: {},
  visible: { transition: { staggerChildren: 0.08, delayChildren: 0.1 } },
};
export default function Home() {
  const prefersReducedMotion = useReducedMotion();
  const [activeSection, setActiveSection] = useState<(typeof sectionOrder)[number]>("home");
  const [formState, setFormState] = useState<"idle" | "loading" | "success" | "error">("idle");
  const pageRef = useRef<HTMLDivElement | null>(null);
  const lenisRef = useRef<Lenis | null>(null);
  const rafIdRef = useRef<number | null>(null);
  const timelineRef = useRef<HTMLDivElement | null>(null);
  const [activeTimelineStep, setActiveTimelineStep] = useState(0);
  const { scrollYProgress } = useScroll();
  const heroOpacity = useTransform(scrollYProgress, [0, 0.25], [1, 0.35]);
  const heroShift = useTransform(scrollYProgress, [0, 0.25], ["0px", "-120px"]);
  const heroBlur = useTransform(scrollYProgress, [0, 0.3], [0, 20]);
  const heroScale = useTransform(scrollYProgress, [0, 0.3], [1, 1.1]);
  const heroBlurFilter = useTransform(heroBlur, (v) => `blur(${v}px)`);

  useEffect(() => {
    if (prefersReducedMotion) {
      return;
    }

    const lenis = new Lenis({
      smoothWheel: true,
      smoothTouch: true,
      touchMultiplier: 1.2,
      lerp: 0.12,
      duration: 0.95,
      easing: (t: number) => 1 - Math.pow(2, -10 * t),
    });

    lenisRef.current = lenis;

    const raf = (time: number) => {
      lenis.raf(time);
      rafIdRef.current = requestAnimationFrame(raf);
    };

    rafIdRef.current = requestAnimationFrame(raf);

    return () => {
      if (rafIdRef.current) {
        cancelAnimationFrame(rafIdRef.current);
        rafIdRef.current = null;
      }
      lenis.destroy();
      lenisRef.current = null;
    };
  }, [prefersReducedMotion]);

  useEffect(() => {
    const ctx = gsap.context(() => {
      gsap.from(".hero-line", {
        opacity: 0,
        y: 28,
        duration: 1.1,
        ease: "power3.out",
        stagger: 0.12,
      });
      gsap.from(".nav-floating", {
        opacity: 0,
        y: -16,
        duration: 0.9,
        ease: "power2.out",
        delay: 0.3,
      });
    }, pageRef);

    return () => {
      ctx.revert();
    };
  }, []);

  useEffect(() => {
    const sectionNodes = Array.from(
      document.querySelectorAll<HTMLElement>("[data-section-id]"),
    );
    const handleScroll = () => {
      const scrollPos = window.scrollY + window.innerHeight / 2;
      for (const section of sectionNodes) {
        if (section.offsetTop <= scrollPos && section.offsetTop + section.offsetHeight > scrollPos) {
          const id = section.dataset.sectionId as (typeof sectionOrder)[number];
          setActiveSection(id);
          break;
        }
      }
    };

    handleScroll();
    window.addEventListener("scroll", handleScroll, { passive: true });
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  useEffect(() => {
    if (!timelineRef.current) return;
    const stepNodes = Array.from(
      timelineRef.current.querySelectorAll<HTMLElement>("[data-timeline-moment]"),
    );
    if (!stepNodes.length) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const stepIndex = Number(entry.target.getAttribute("data-timeline-moment"));
            if (!Number.isNaN(stepIndex)) {
              setActiveTimelineStep(stepIndex);
            }
          }
        });
      },
      { threshold: 0.6, rootMargin: "-15% 0px -25% 0px" },
    );

    stepNodes.forEach((node) => observer.observe(node));

    return () => {
      stepNodes.forEach((node) => observer.unobserve(node));
      observer.disconnect();
    };
  }, []);

  const sectionNumber = useMemo(() => {
    const index = sectionOrder.indexOf(activeSection);
    return String(index + 1).padStart(2, "0");
  }, [activeSection]);

  const handleNavClick = (id: (typeof sectionOrder)[number]) => {
    const target = document.getElementById(id);
    if (!target) return;

    if (lenisRef.current) {
      lenisRef.current.scrollTo(target, {
        offset: -80,
        duration: 1,
      });
      return;
    }

    target.scrollIntoView({ behavior: "smooth", block: "start" });
  };

  const handleFormSubmit = (event: React.FormEvent<HTMLFormElement>) => {
    event.preventDefault();
    setFormState("loading");
    window.setTimeout(() => {
      const success = true;
      setFormState(success ? "success" : "error");
      window.setTimeout(() => setFormState("idle"), 2600);
    }, 900);
  };

  const cardHover = prefersReducedMotion
    ? {}
    : {
        whileHover: { y: -10, scale: 1.02 },
        whileTap: { scale: 0.995 },
      };

  return (
    <div ref={pageRef} className="relative min-h-screen overflow-x-hidden bg-[#0a0a12] text-white">
      {/* Background Glow Circles */}
      <div className="pointer-events-none fixed inset-0 overflow-hidden -z-10">
        <motion.div
          className="absolute -top-32 left-1/2 -translate-x-1/2 w-[1100px] h-[1100px] rounded-full blur-3xl opacity-40"
          style={{
            background: `radial-gradient(closest-side, ${glowColors.primary}, rgba(18,18,27,0))`,
            y: heroShift,
          }}
        />
        <motion.div
          className="absolute bottom-0 right-0 w-[700px] h-[700px] translate-x-1/3 translate-y-1/3 rounded-full blur-3xl opacity-30"
          style={{
            background: `radial-gradient(closest-side, ${glowColors.secondary}, rgba(18,18,27,0))`,
          }}
        />
      </div>

      {/* Background base */}
      <motion.div
        className="pointer-events-none fixed inset-0 -z-20 overflow-hidden"
        style={{ opacity: heroOpacity }}
      >
        <motion.div
          className="absolute inset-0 w-full h-full"
          style={{ scale: heroScale, y: heroShift }}
        >
          <Image
            src={heroBackground}
            alt="Background texture"
            fill
            className="object-cover object-center opacity-40"
            priority
            quality={90}
          />
        </motion.div>
        <div className="absolute inset-0 bg-gradient-to-b from-[#05050a]/85 via-transparent to-[#05050a]" />
        <motion.div
          className="absolute inset-0 pointer-events-none"
          style={{
            backdropFilter: heroBlurFilter,
            WebkitBackdropFilter: heroBlurFilter,
          }}
        />
      </motion.div>

      <header className="nav-floating sticky top-0 z-50 w-full backdrop-blur-xl bg-[#0a0a12]/80 border-b border-white/5">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex h-16 items-center justify-between">
            <a href="#" className="flex items-center gap-3">
              <span className="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-orange-400 to-pink-500 shadow-[0_0_0_2px_rgba(255,255,255,0.06)_inset]">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="text-white">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
              </span>
              <span className="text-lg font-semibold tracking-tight">Bruno Falci</span>
            </a>

            <nav className="hidden md:flex gap-1 border border-white/5 rounded-full px-4 items-center">
              {sectionOrder.slice(0, 4).map((section) => (
                <button
                  key={section}
                  onClick={() => handleNavClick(section)}
                  className="px-3 py-2 text-sm font-medium text-zinc-300 hover:text-white transition"
                >
                  {section.charAt(0).toUpperCase() + section.slice(1)}
                </button>
              ))}
            </nav>

            <button
              onClick={() => handleNavClick("contact")}
              className="group relative inline-flex shadow-[0_8px_16px_-4px_rgba(251,146,60,0.2)] hover:shadow-[0_12px_20px_-6px_rgba(251,146,60,0.28)] transition duration-300 ease-out cursor-pointer hover:-translate-y-0.5 text-white rounded-md p-[1px] items-center justify-center"
              style={{ backgroundImage: "linear-gradient(144deg,#FB923C, #EC4899 50%, #8B5CF6)" }}
            >
              <span className="flex items-center justify-center gap-2 text-[14px] leading-none w-full h-full transition-colors duration-300 group-hover:bg-transparent font-medium bg-[#0b0f17] rounded-md px-4 py-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                  <path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7" />
                  <rect x="2" y="4" width="20" height="16" rx="2" />
                </svg>
                <span>Contato</span>
              </span>
            </button>
          </div>
        </div>
      </header>

      <aside className="fixed left-6 top-1/2 z-40 hidden -translate-y-1/2 md:block sm:left-8 lg:left-12">
        <nav className="space-y-3 text-sm leading-6">
          {sectionOrder.map((section) => (
            <button
              key={section}
              onClick={() => handleNavClick(section)}
              className={`block border-l-2 pl-4 text-left font-medium transition-all duration-300 ${
                activeSection === section
                  ? "border-white text-white opacity-100"
                  : "border-transparent text-neutral-300 opacity-70 hover:border-white/30 hover:opacity-90"
              }`}
              aria-current={activeSection === section ? "page" : undefined}
            >
              {section.charAt(0).toUpperCase() + section.slice(1)}
            </button>
          ))}
        </nav>
        <div className="mt-16 h-px w-12 bg-neutral-400/60" />
        <button
          className="mt-8 flex items-center gap-2 text-sm text-neutral-300 transition hover:opacity-80"
          onClick={() => handleNavClick("projects")}
        >
          <span>Ver trabalhos</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="1.5"
            strokeLinecap="round"
            strokeLinejoin="round"
            className="h-4 w-4"
          >
            <path d="M5 12h14" />
            <path d="m12 5 7 7-7 7" />
          </svg>
        </button>
      </aside>

      <aside className="fixed right-6 top-1/2 z-40 hidden -translate-y-1/2 md:block sm:right-8 lg:right-12">
        <div className="mb-8 flex items-center justify-end">
          <div className="mr-3 h-px w-10 bg-neutral-400/60" />
          <div className="text-sm font-medium">{sectionNumber}</div>
        </div>
        <div className="flex flex-col items-end gap-4">
          {socialLinks.map((social) => (
            <a
              key={social.label}
              href={social.href}
              className="rounded-full p-2 transition hover:bg-white/10"
              aria-label={social.label}
            >
              <div className="h-5 w-5 rounded-full bg-white/60" />
            </a>
          ))}
        </div>
      </aside>
      <main className="relative">

<section
  id="home"
  data-section-id="home"
  className="section relative flex min-h-screen items-center px-6 pb-20 pt-24 sm:px-8 lg:px-12"
>
  <div className="mx-auto grid w-full max-w-6xl items-center gap-12 lg:grid-cols-[minmax(0,1fr)_390px]">
    <motion.div
      variants={stagger}
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true, amount: 0.4 }}
      className="space-y-6 text-center lg:text-left"
    >
      <motion.span
        variants={fadeUp}
        className="inline-flex items-center justify-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-[11px] font-semibold uppercase tracking-[0.35em] text-neutral-300"
      >
        Secao 01 ? Introducao
      </motion.span>
      <motion.h1
        variants={fadeUp}
        className="text-4xl font-light text-white sm:text-6xl lg:text-7xl"
      >
        Estrat?gia viva para lan?ar, medir e escalar produtos.
      </motion.h1>
      <motion.p
        variants={fadeUp}
        className="text-base text-neutral-300 sm:text-lg lg:max-w-xl"
      >
        Narrativas claras, experimenta??o disciplinada e m?tricas que mostram o caminho. Role para acompanhar cada momento dessa jornada.
      </motion.p>
      <motion.div variants={fadeUp} className="pt-6">
        <button
          onClick={() => handleNavClick("projects")}
          className="inline-flex items-center gap-3 rounded-full border border-white/15 bg-white/10 px-6 py-3 text-sm font-semibold text-white shadow-[0_12px_35px_-18px_rgba(16,230,182,0.6)] transition hover:border-accent hover:text-accent"
        >
          Come?ar a descer
          <span className="text-base" aria-hidden>
            ?
          </span>
        </button>
      </motion.div>
    </motion.div>
    <motion.div
      variants={fadeUp}
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true, amount: 0.3 }}
      className="relative aspect-[3/4] w-full overflow-hidden rounded-[32px] border border-white/10 bg-white/5 shadow-[0_45px_120px_-60px_rgba(0,0,0,0.85)]"
    >
      <Image
        src={heroBackground}
        alt="Retrato visual do portfolio"
        fill
        priority
        className="object-cover"
        sizes="(max-width: 1024px) 80vw, 400px"
      />
      <div className="absolute inset-0 bg-gradient-to-t from-[#05050a]/80 via-transparent to-transparent" />
      <div className="absolute bottom-6 left-6 right-6 flex flex-col gap-1 text-left">
        <p className="text-xs uppercase tracking-[0.3em] text-white/60">Scroll</p>
        <p className="text-lg font-light text-white">Mosaico de momentos, do fundamento ? m?o na massa.</p>
      </div>
    </motion.div>
  </div>

  <motion.button
    onClick={() => handleNavClick("projects")}
    className="absolute bottom-12 left-1/2 -translate-x-1/2 rounded-full border border-white/20 bg-[#0a0a12]/60 px-6 py-3 text-xs font-semibold uppercase tracking-[0.4em] text-neutral-300 shadow-lg backdrop-blur"
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    transition={{ delay: 0.5, duration: 0.6, ease: [0.22, 1, 0.36, 1] }}
  >
    Scroll
  </motion.button>

  <motion.div
    className="pointer-events-none absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-b from-transparent via-[#090914] to-[#0a0a12]"
    initial={{ opacity: 0, y: 30 }}
    animate={{ opacity: 1, y: 0 }}
    transition={{ delay: 0.4, duration: 0.8, ease: [0.22, 1, 0.36, 1] }}
  />
</section>

        <div className="px-6 py-24 sm:px-8 lg:px-12">
          <motion.div
          variants={fadeUp}
          initial="hidden"
          whileInView="visible"
          viewport={{ once: true, amount: 0.4 }}
          className="mx-auto max-w-4xl text-center"
        >
          <p className="font-serif text-2xl font-light leading-relaxed text-neutral-300 sm:text-3xl">
            &quot;Produtos crescem quando historias certas encontram dados certos.&quot;
          </p>
        </motion.div>
      </div>
        <section
          id="projects"
          data-section-id="projects"
          className="section min-h-screen bg-black/60 px-6 py-20 sm:px-8 lg:px-12"
        >
          <div className="mx-auto w-full max-w-6xl rounded-3xl border border-white/10 bg-[#060608]/90 px-6 py-16 sm:px-10 lg:px-16">
            <motion.div
              variants={stagger}
              initial="hidden"
              whileInView="visible"
              viewport={{ once: true, amount: 0.3 }}
              className="space-y-16"
            >
              <div className="space-y-4">
                <motion.h2
                  variants={fadeUp}
                  className="font-serif text-[44px] font-light tracking-tight sm:text-[56px] md:text-[64px]"
                >
                  Projetos Selecionados
                </motion.h2>
                <motion.p variants={fadeUp} className="max-w-2xl text-lg text-neutral-300">
                  Casos que combinam narrativa, UX e experimentação para destravar aquisição, ativação
                  e retenção.
                </motion.p>
              </div>

              <div className="space-y-20">
                {projects.map((project, index) => (
                  <motion.div
                    key={project.title}
                    variants={fadeUp}
                    className={`grid grid-cols-12 items-center gap-8 ${
                      index % 2 === 1 ? "lg:[&>*:first-child]:order-2" : ""
                    }`}
                  >
                    <div className="col-span-12 lg:col-span-6">
                      <motion.div
                        {...cardHover}
                        className="group relative aspect-[4/3] overflow-hidden rounded-2xl border border-white/10 bg-neutral-900"
                      >
                        <Image
                          src={mockupPlaceholder}
                          alt={project.title}
                          fill
                          className="object-cover brightness-[0.95] transition duration-500 group-hover:scale-[1.02]"
                          sizes="(max-width: 768px) 100vw, 50vw"
                        />
                        <div className="absolute inset-0 bg-gradient-to-br from-black/40 via-transparent to-black/60" />
                        <div className="absolute left-4 top-4 rounded-full bg-white/10 px-3 py-1 text-xs text-neutral-200">
                          {project.caption}
                        </div>
                      </motion.div>
                    </div>
                    <div className="col-span-12 lg:col-span-6">
                      <div className="space-y-4">
                        <div className="text-sm uppercase tracking-wide text-neutral-400">
                          Impacto - Crescimento
                        </div>
                        <h3 className="font-serif text-3xl font-light">{project.title}</h3>
                        <p className="text-neutral-200">{project.description}</p>
                        <div className="flex flex-wrap gap-2">
                          {project.tags.map((tag) => (
                            <span
                              key={tag}
                              className="rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-neutral-200"
                            >
                              {tag}
                            </span>
                          ))}
                        </div>
                        <button className="text-sm font-medium text-neutral-200 underline decoration-white/30 underline-offset-4 transition hover:text-white hover:decoration-white">
                          Ver estudo de caso {"->"}
                        </button>
                      </div>
                    </div>
                  </motion.div>
                ))}
              </div>
            </motion.div>
          </div>
        </section>

        <section
          id="process"
          data-section-id="process"
          className="section min-h-screen px-6 py-20 sm:px-8 lg:px-12"
        >
          <div className="mx-auto w-full max-w-6xl rounded-3xl border border-white/10 bg-[#07070c]/90 px-6 py-16 sm:px-10 lg:px-16">
            <motion.div
              variants={stagger}
              initial="hidden"
              whileInView="visible"
              viewport={{ once: true, amount: 0.3 }}
              className="space-y-12"
            >
              <div className="space-y-3">
                <motion.h2
                  variants={fadeUp}
                  className="font-serif text-[44px] font-light tracking-tight sm:text-[56px]"
                >
                  Processo orientado a funil
                </motion.h2>
                <motion.p variants={fadeUp} className="max-w-2xl text-lg text-neutral-300">
                  Pesquisa, mensagem, experimentação e medição em ciclos curtos para aprender rápido e
                  escalar o que funciona.
                </motion.p>
              </div>
              <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                {processSteps.map((step, index) => (
                  <motion.div
                    key={step.title}
                    variants={fadeUp}
                    {...cardHover}
                    className="relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-5 backdrop-blur"
                  >
                    <div className="mb-3 flex items-center justify-between text-sm text-neutral-400">
                      <span>{String(index + 1).padStart(2, "0")}</span>
                      <span className="h-px w-10 bg-white/10" />
                    </div>
                    <div className="relative mb-4 overflow-hidden rounded-2xl border border-white/10 bg-black/40">
                      <Image
                        src={mockupPlaceholder}
                        alt={`Mockup ${step.title}`}
                        width={600}
                        height={400}
                        className="h-40 w-full object-cover opacity-90"
                      />
                    </div>
                    <h3 className="mb-2 font-semibold text-white">{step.title}</h3>
                    <p className="text-sm text-neutral-300">{step.description}</p>
                  </motion.div>
                ))}
              </div>
            </motion.div>
          </div>
        </section>


        <section
          id="timeline"
          data-section-id="timeline"
          className="section min-h-screen px-6 py-20 sm:px-8 lg:px-12"
        >
          <motion.div
            variants={fadeUp}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true, amount: 0.3 }}
            className="mx-auto max-w-3xl text-center space-y-4"
          >
            <span className="text-xs uppercase tracking-[0.35em] text-neutral-500">Secao 03</span>
            <h2 className="font-serif text-[42px] font-light leading-tight text-white sm:text-[56px]">
              Linha do tempo viva
            </h2>
            <p className="text-base text-neutral-300">
              Um mosaico de momentos que mostra como estrategia, tecnologia e execucao foram se encontrando ao longo
              dos anos. Scroll vertical, narrativa horizontal.
            </p>
          </motion.div>

          <div
            ref={timelineRef}
            className="relative mx-auto mt-16 max-w-6xl pb-20"
          >
            <div className="absolute left-4 top-0 bottom-0 w-px bg-gradient-to-b from-white/30 via-white/10 to-transparent md:left-1/2" />
            <div className="space-y-14">
              {timelineMoments.map((moment, index) => {
                const isLeft = index % 2 === 0;
                const isPast = index <= activeTimelineStep;
                return (
                  <motion.div
                    key={moment.id}
                    data-timeline-moment={index}
                    initial={{ opacity: 0, x: isLeft ? -80 : 80, y: 40 }}
                    whileInView={{ opacity: 1, x: 0, y: 0 }}
                    viewport={{ once: false, amount: 0.6 }}
                    transition={{ duration: 0.8, ease: [0.22, 1, 0.36, 1] }}
                    className={`relative flex w-full ${isLeft ? "md:justify-start" : "md:justify-end"}`}
                  >
                    <div
                      className={`relative w-full md:w-1/2 ${
                        isLeft ? "md:pr-16 text-left md:text-right" : "md:pl-16"
                      }`}
                    >
                      <span
                        className={`absolute top-1/2 hidden h-3 w-3 -translate-y-1/2 rounded-full border transition-all duration-500 md:block ${
                          isLeft ? "right-[-36px]" : "left-[-36px]"
                        } ${
                          isPast
                            ? "border-transparent bg-white shadow-[0_0_18px_rgba(255,255,255,0.6)]"
                            : "border-white/30 bg-[#0f0f17]"
                        }`}
                      />
                      <div
                        className={`relative rounded-3xl border p-6 shadow-2xl ring-1 ring-white/5 backdrop-blur ${
                          isPast ? "border-white/30 bg-white/[0.08]" : "border-white/10 bg-white/[0.03]"
                        }`}
                        style={{ boxShadow: isPast ? "0 20px 60px rgba(0,0,0,0.4)" : undefined }}
                      >
                        <div className="flex items-center justify-between text-[11px] uppercase tracking-[0.3em] text-neutral-400">
                          <span>{moment.badge}</span>
                          <span className="text-neutral-500">{moment.year}</span>
                        </div>
                        <div className="mt-4">
                          <div className="relative aspect-[4/3] overflow-hidden rounded-2xl border border-white/10">
                            <Image
                              src={moment.image}
                              alt={`Momento ${moment.title}`}
                              fill
                              className="object-cover"
                              sizes="(max-width: 768px) 100vw, 40vw"
                            />
                            <div
                              className="absolute inset-0 opacity-30 mix-blend-screen"
                              style={{ background: moment.accent }}
                            />
                          </div>
                        </div>
                        <div className="mt-4 space-y-2">
                          <h3 className="font-serif text-2xl font-light text-white sm:text-3xl">{moment.title}</h3>
                          <p className="text-sm text-neutral-300">{moment.description}</p>
                        </div>
                      </div>
                    </div>
                  </motion.div>
                );
              })}
            </div>
          </div>
        </section>

        <section
          id="about"
          data-section-id="about"
          className="section min-h-screen px-6 py-20 sm:px-8 lg:px-12"
        >
          <div className="mx-auto flex w-full max-w-5xl flex-col gap-12 lg:flex-row">
            <motion.div
              variants={fadeUp}
              initial="hidden"
              whileInView="visible"
              viewport={{ once: true, amount: 0.3 }}
              className="flex-1 space-y-6"
            >
              <h2 className="font-serif text-[44px] font-light tracking-tight sm:text-[56px]">
                Sobre
              </h2>
              <div className="relative aspect-[4/3] w-full overflow-hidden rounded-3xl border border-white/10 bg-black/40">
                <Image
                  src={mockupPlaceholder}
                  alt="Mockup sobre"
                  fill
                  className="object-cover"
                  sizes="(max-width: 1024px) 100vw, 50vw"
                />
              </div>
              <div className="space-y-4 text-neutral-200">
                <p>
                  Sou marketer de produto focado em crescimento. Conecto pesquisa, narrativa e analytics
                  para destravar aquisição, ativação e retenção.
                </p>
                <p>
                  Gosto de trabalhar com times de produto, design e engenharia para lançar rápido, medir e
                  iterar. Áreas-chave: go-to-market, onboarding, pricing, loops de retenção e conteúdo que
                  converte.
                </p>
                <p>
                  Curto cafés locais, fotografia e observar como as pessoas usam produtos no dia a dia -
                  as melhores ideias costumam vir daí.
                </p>
              </div>
            </motion.div>
            <motion.div
              variants={fadeUp}
              initial="hidden"
              whileInView="visible"
              viewport={{ once: true, amount: 0.3 }}
              className="flex-1 space-y-6 rounded-3xl border border-white/10 bg-[#0b0b12]/80 p-6 backdrop-blur"
            >
              <div className="relative aspect-[4/3] w-full overflow-hidden rounded-2xl border border-white/10 bg-black/40">
                <Image
                  src={mockupPlaceholder}
                  alt="Mockup disponibilidade"
                  fill
                  className="object-cover"
                  sizes="(max-width: 1024px) 100vw, 40vw"
                />
              </div>
              <div className="flex items-center justify-between">
                <div className="space-y-1">
                  <div className="text-sm uppercase tracking-wide text-neutral-400">Foco</div>
                  <div className="text-lg text-white">Aquisio - Ativao - Reteno</div>
                </div>
                <div className="rounded-full bg-white/10 px-3 py-1 text-xs text-neutral-200">
                  Disponvel para projetos
                </div>
              </div>
              <div className="grid grid-cols-2 gap-4 text-sm text-neutral-300">
                <div>
                  <div className="text-neutral-400">Base</div>
                  <div className="text-white">So Paulo, BR</div>
                </div>
                <div>
                  <div className="text-neutral-400">Formato</div>
                  <div className="text-white">Remoto / Hbrido</div>
                </div>
                <div>
                  <div className="text-neutral-400">Perfil</div>
                  <div className="text-white">Produto & Growth</div>
                </div>
                <div>
                  <div className="text-neutral-400">Stacks</div>
                  <div className="text-white">Figma, GA/Amplitude, React/Next</div>
                </div>
              </div>
            </motion.div>
          </div>
        </section>

        <section
          id="skills"
          data-section-id="skills"
          className="section px-6 pb-20 pt-10 sm:px-8 lg:px-12"
        >
          <motion.div
            variants={fadeUp}
            initial="hidden"
            whileInView="visible"
            viewport={{ once: true, amount: 0.3 }}
            className="mx-auto w-full max-w-6xl rounded-3xl border border-white/10 bg-[#05050a]/90 p-10"
          >
            <div className="mb-8">
              <h2 className="font-serif text-[44px] font-light tracking-tight sm:text-[56px]">
                Skills & Expertise
              </h2>
            </div>
            <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
              {skills.map((skill, index) => (
                <motion.div
                  key={skill.title}
                  variants={fadeUp}
                  {...cardHover}
                  className={`relative rounded-3xl border border-white/10 bg-white/5 p-6 backdrop-blur transition ${
                    skill.badge ? "ring-1 ring-accent/30" : ""
                  }`}
                >
                  <div className="mb-4 flex items-center justify-between">
                    <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-white/5 text-neutral-200">
                      {String(index + 1).padStart(2, "0")}
                    </div>
                    {skill.badge ? (
                      <span className="rounded-full bg-accent/10 px-3 py-1 text-[11px] font-semibold text-accent ring-1 ring-accent/40">
                        {skill.badge}
                      </span>
                    ) : (
                      <span className="text-xs text-neutral-500">Skill</span>
                    )}
                  </div>
                  <div className="relative mb-4 overflow-hidden rounded-2xl border border-white/10 bg-black/30">
                    <Image
                      src={mockupPlaceholder}
                      alt={`Mockup ${skill.title}`}
                      width={400}
                      height={300}
                      className="h-32 w-full object-cover"
                    />
                  </div>
                  <h3 className="mb-2 text-lg font-semibold text-white">{skill.title}</h3>
                  <p className="text-sm text-neutral-300">{skill.description}</p>
                </motion.div>
              ))}
            </div>
            <div className="mt-8 rounded-2xl border border-white/5 bg-white/5 p-6">
              <h4 className="mb-3 text-lg font-semibold text-white">Ferramentas</h4>
              <div className="flex flex-wrap gap-3 text-sm text-neutral-200">
                {[
                  "Figma",
                  "GA / Amplitude / Looker",
                  "Notion",
                  "Framer",
                  "HTML/CSS/JS",
                  "React / Next",
                ].map((tool) => (
                  <span key={tool} className="rounded-lg bg-black/40 px-3 py-2">
                    {tool}
                  </span>
                ))}
              </div>
            </div>
          </motion.div>
        </section>

        <div className="px-6 py-24 sm:px-8 lg:px-12">
          <motion.div
          variants={fadeUp}
          initial="hidden"
          whileInView="visible"
          viewport={{ once: true, amount: 0.4 }}
          className="mx-auto max-w-4xl text-center"
        >
          <p className="font-serif text-2xl font-light leading-relaxed text-neutral-300 sm:text-3xl">
            &quot;Cada experimento conta uma historia: o que mover e por que.&quot;
          </p>
        </motion.div>
      </div>
        <section
          id="contact"
          data-section-id="contact"
          className="section min-h-screen px-6 pb-20 pt-10 sm:px-8 lg:px-12"
        >
          <div className="mx-auto w-full max-w-6xl rounded-3xl border border-white/10 bg-[#07070d]/90 px-6 py-16 sm:px-10 lg:px-16">
            <div className="grid gap-12 lg:grid-cols-2">
              <motion.div
                variants={fadeUp}
                initial="hidden"
                whileInView="visible"
                viewport={{ once: true, amount: 0.3 }}
                className="space-y-6"
              >
                <h2 className="font-serif text-[44px] font-light tracking-tight sm:text-[56px]">
                  Vamos trabalhar juntos
                </h2>
                <div className="relative aspect-[4/3] w-full overflow-hidden rounded-3xl border border-white/10 bg-black/40">
                  <Image
                    src={mockupPlaceholder}
                    alt="Mockup contato"
                    fill
                    className="object-cover"
                    sizes="(max-width: 1024px) 100vw, 45vw"
                  />
                </div>
                <p className="text-neutral-200">
                  Pronto para acelerar aquisição, ativação ou retenção? Me conte sobre seu produto, metas
                  e prazos. Respondo com um plano de 30 dias.
                </p>
                <div className="space-y-4 text-neutral-200">
                  <div className="flex items-center gap-3">
                    <span className="rounded-full bg-white/10 px-2 py-1 text-xs">Email</span>
                    <span>contato@placeholder.com</span>
                  </div>
                  <div className="flex items-center gap-3">
                    <span className="rounded-full bg-white/10 px-2 py-1 text-xs">Telefone</span>
                    <span>+55 (00) 0000-0000</span>
                  </div>
                  <div className="flex items-center gap-3">
                    <span className="rounded-full bg-white/10 px-2 py-1 text-xs">Local</span>
                    <span>So Paulo, BR</span>
                  </div>
                </div>
              </motion.div>

              <motion.div
                variants={fadeUp}
                initial="hidden"
                whileInView="visible"
                viewport={{ once: true, amount: 0.3 }}
                className="space-y-6 rounded-2xl border border-white/10 bg-white/5 p-6 backdrop-blur"
              >
                <div className="relative aspect-[4/3] w-full overflow-hidden rounded-2xl border border-white/10 bg-black/20">
                  <Image
                    src={mockupPlaceholder}
                    alt="Mockup formul?rio"
                    fill
                    className="object-cover"
                    sizes="(max-width: 1024px) 100vw, 45vw"
                  />
                </div>
                <form className="space-y-4" onSubmit={handleFormSubmit}>
                  <div className="grid gap-4 sm:grid-cols-2">
                    <label className="space-y-2 text-sm text-neutral-200">
                      <span>Nome</span>
                      <input
                        required
                        type="text"
                        className="w-full rounded-lg border border-white/10 bg-black/50 px-4 py-3 text-white outline-none transition focus:border-accent focus:ring-1 focus:ring-accent"
                        placeholder="Seu nome"
                      />
                    </label>
                    <label className="space-y-2 text-sm text-neutral-200">
                      <span>Email</span>
                      <input
                        required
                        type="email"
                        className="w-full rounded-lg border border-white/10 bg-black/50 px-4 py-3 text-white outline-none transition focus:border-accent focus:ring-1 focus:ring-accent"
                        placeholder="seu@email.com"
                      />
                    </label>
                  </div>
                  <label className="space-y-2 text-sm text-neutral-200">
                    <span>Assunto</span>
                    <input
                      type="text"
                      className="w-full rounded-lg border border-white/10 bg-black/50 px-4 py-3 text-white outline-none transition focus:border-accent focus:ring-1 focus:ring-accent"
                      placeholder="Lanamento, growth sprint..."
                    />
                  </label>
                  <label className="space-y-2 text-sm text-neutral-200">
                    <span>Mensagem</span>
                    <textarea
                      required
                      rows={5}
                      className="w-full rounded-lg border border-white/10 bg-black/50 px-4 py-3 text-white outline-none transition focus:border-accent focus:ring-1 focus:ring-accent"
                      placeholder="Conte sobre o produto, metas e prazos."
                    />
                  </label>
                  <label className="flex items-center gap-3 text-sm text-neutral-200">
                    <input
                      type="checkbox"
                      className="h-4 w-4 rounded border-white/20 bg-black/50 text-accent focus:ring-accent"
                    />
                    <span>Quero receber um roadmap de 30 dias.</span>
                  </label>
                  <button
                    type="submit"
                    className="group inline-flex w-full items-center justify-center gap-2 rounded-lg border border-accent/40 bg-accent/10 px-4 py-3 text-sm font-semibold text-white transition hover:border-accent hover:bg-accent/20"
                    disabled={formState === "loading"}
                  >
                    {formState === "loading" ? "Enviando..." : "Enviar mensagem"}
                    <span className="transition group-hover:translate-x-1">{"->"}</span>
                  </button>
                  {formState === "success" && (
                    <div className="rounded-lg border border-green-400/40 bg-green-500/10 px-3 py-2 text-sm text-green-200">
                      Recebi sua mensagem. Voltarei em breve.
                    </div>
                  )}
                  {formState === "error" && (
                    <div className="rounded-lg border border-red-400/40 bg-red-500/10 px-3 py-2 text-sm text-red-200">
                      Algo deu errado. Tente novamente.
                    </div>
                  )}
                </form>
              </motion.div>
            </div>
          </div>
        </section>
      </main>

      <footer className="border-t border-white/10 bg-black/60 px-6 py-6 backdrop-blur sm:px-8 lg:px-12">
        <div className="mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 text-sm text-neutral-400 md:flex-row">
          <div> 2024 Bruno Falci. Todos os direitos reservados.</div>
          <div className="flex items-center gap-6">
            <a href="#" className="hover:text-white">
              Privacidade
            </a>
            <a href="#" className="hover:text-white">
              Termos
            </a>
          </div>
        </div>
      </footer>
    </div>
  );
}
